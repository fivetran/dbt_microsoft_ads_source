version: 2

models:
  - name: stg_microsoft_ads__account_history
    identifier: "{{ var('microsoft_ads_account_history_identifier', 'account_history') }}"
    description: Each record in this table represents a version of one or more Microsoft accounts.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - account_id
            - modified_at
    columns:
      - name: account_id
        description: '{{ doc("account_id") }}'
        tests:
          - not_null
      - name: account_name
        description: '{{ doc("account_name") }}'
      - name: modified_at
        description: '{{ doc("modified_at") }}'
      - name: time_zone
        description: '{{ doc("time_zone") }}'
      - name: currency_code
        description: '{{ doc("currency_code") }}'
      - name: is_most_recent_record
        description: '{{ doc("is_most_recent_record") }}'
    
  - name: stg_microsoft_ads__account_daily_report
    identifier: "{{ var('microsoft_ads_account_daily_report_identifier', 'account_performance_daily_report') }}"
    description: Each record in this table represents the daily performance by account and all non-metric columns.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date_day
            - account_id
            - device_os
            - device_type
            - network
            - currency_code
            - ad_distribution
            - bid_match_type
            - delivered_match_type
            - top_vs_other
    columns:
      - name: date_day
        description: '{{ doc("date_day") }}' 
      - name: account_id
        description: '{{ doc("account_id") }}'
        tests:
          - not_null
      - name: device_os
        description: '{{ doc("device_os") }}'
      - name: device_type
        description: '{{ doc("device_type") }}'
      - name: network
        description: '{{ doc("network") }}'
      - name: currency_code
        description: '{{ doc("currency_code") }}'
      - name: ad_distribution
        description: '{{ doc("ad_distribution") }}'
      - name: bid_match_type
        description: '{{ doc("bid_match_type") }}'
      - name: delivered_match_type
        description: '{{ doc("delivered_match_type") }}'
      - name: top_vs_other
        description: '{{ doc("top_vs_other") }}'
      - name: clicks
        description: '{{ doc("clicks") }}'
      - name: impressions
        description: '{{ doc("impressions") }}'
      - name: spend
        description: '{{ doc("spend") }}'

  - name: stg_microsoft_ads__ad_group_history
    identifier: "{{ var('microsoft_ads_ad_group_history_identifier', 'ad_group_history') }}"
    description: Each record in this table represents a version of one or more Microsoft ad groups.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - ad_group_id
            - modified_at
    columns:
      - name: ad_group_id
        description: '{{ doc("ad_group_id") }}'
        tests:
          - not_null
      - name: ad_group_name
        description: '{{ doc("ad_group_name") }}'
      - name: campaign_id
        description: '{{ doc("campaign_id") }}'
      - name: modified_at
        description: '{{ doc("modified_at") }}'
      - name: start_date
        description: '{{ doc("start_date") }}'
      - name: end_date
        description: '{{ doc("end_date") }}'
      - name: status
        description: '{{ doc("ad_group_status") }}'
      - name: is_most_recent_record
        description: '{{ doc("is_most_recent_record") }}'

  - name: stg_microsoft_ads__ad_group_daily_report
    identifier: "{{ var('microsoft_ads_ad_group_daily_report_identifier', 'ad_group_performance_daily_report') }}"
    description: Each record in this table represents the daily performance by account, campaign, ad group and all non-metric columns.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date_day
            - account_id
            - campaign_id
            - ad_group_id
            - device_os
            - device_type
            - network
            - language
            - currency_code
            - ad_distribution
            - bid_match_type
            - delivered_match_type
            - top_vs_other
    columns:
      - name: date_day
        description: '{{ doc("date_day") }}' 
      - name: account_id
        description: '{{ doc("account_id") }}'
      - name: campaign_id
        description: '{{ doc("campaign_id") }}'
      - name: ad_group_id
        description: '{{ doc("ad_group_id") }}'
        tests:
          - not_null
      - name: currency_code
        description: '{{ doc("currency_code") }}'
      - name: device_os
        description: '{{ doc("device_os") }}'
      - name: device_type
        description: '{{ doc("device_type") }}'
      - name: network
        description: '{{ doc("network") }}'
      - name: language
        description: '{{ doc("language") }}'
      - name: ad_distribution
        description: '{{ doc("ad_distribution") }}'
      - name: bid_match_type
        description: '{{ doc("bid_match_type") }}'
      - name: delivered_match_type
        description: '{{ doc("delivered_match_type") }}'
      - name: top_vs_other
        description: '{{ doc("top_vs_other") }}'
      - name: clicks
        description: '{{ doc("clicks") }}'
      - name: impressions
        description: '{{ doc("impressions") }}'
      - name: spend
        description: '{{ doc("spend") }}'

  - name: stg_microsoft_ads__ad_history
    identifier: "{{ var('microsoft_ads_ad_history_identifier', 'ad_history') }}"
    description: Each record in this table represents a version of one or more Microsoft ads.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - ad_id
            - modified_at
    columns:
      - name: ad_id
        description: '{{ doc("ad_id") }}'
        tests:
          - not_null
      - name: ad_name
        description: '{{ doc("ad_name") }}'
      - name: final_url 
        description: '{{ doc("final_url") }}'
      - name: ad_group_id
        description: '{{ doc("ad_group_id") }}'
      - name: modified_at 
        description: '{{ doc("modified_at") }}'
      - name: status
        description: '{{ doc("ad_status") }}'
      - name: type
        description: '{{ doc("ad_type") }}'
      - name: is_most_recent_record
        description: '{{ doc("is_most_recent_record") }}'

  - name: stg_microsoft_ads__ad_daily_report
    identifier: "{{ var('microsoft_ads_ad_daily_report_identifier', 'ad_performance_daily_report') }}"
    description: Each record in this table represents the daily performance by account, campaign, ad group, ad and all non-metric columns.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date_day
            - account_id
            - campaign_id
            - ad_group_id
            - ad_id
            - device_os
            - device_type
            - network
            - language
            - currency_code
            - ad_distribution
            - bid_match_type
            - delivered_match_type
            - top_vs_other
    columns:
      - name: date_day
        description: '{{ doc("date_day") }}' 
      - name: account_id
        description: '{{ doc("account_id") }}'
      - name: campaign_id
        description: '{{ doc("campaign_id") }}'
      - name: ad_group_id
        description: '{{ doc("ad_group_id") }}'
      - name: ad_id
        description: '{{ doc("ad_id") }}'
        tests:
          - not_null
      - name: currency_code
        description: '{{ doc("currency_code") }}'
      - name: device_os
        description: '{{ doc("device_os") }}'
      - name: device_type
        description: '{{ doc("device_type") }}'
      - name: network
        description: '{{ doc("network") }}'
      - name: language
        description: '{{ doc("language") }}'
      - name: ad_distribution
        description: '{{ doc("ad_distribution") }}'
      - name: bid_match_type
        description: '{{ doc("bid_match_type") }}'
      - name: delivered_match_type
        description: '{{ doc("delivered_match_type") }}'
      - name: top_vs_other
        description: '{{ doc("top_vs_other") }}'
      - name: clicks
        description: '{{ doc("clicks") }}'
      - name: impressions
        description: '{{ doc("impressions") }}'
      - name: spend
        description: '{{ doc("spend") }}'

  - name: stg_microsoft_ads__campaign_history
    identifier: "{{ var('microsoft_ads_campaign_history_identifier', 'campaign_history') }}"
    description: Each record in this table represents a version of one or more Microsoft campaigns.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - campaign_id
            - modified_at
    columns:
      - name: campaign_id
        description: '{{ doc("campaign_id") }}'
        tests:
          - not_null
      - name: campaign_name
        description: '{{ doc("campaign_name") }}'
      - name: account_id
        description: '{{ doc("account_id") }}'
      - name: modified_at
        description: '{{ doc("modified_at") }}'
      - name: type
        description: '{{ doc("campaign_type") }}'
      - name: time_zone
        description: '{{ doc("time_zone") }}'
      - name: status
        description: '{{ doc("campaign_status") }}'
      - name: is_most_recent_record
        description: '{{ doc("is_most_recent_record") }}'

  - name: stg_microsoft_ads__campaign_daily_report
    identifier: "{{ var('microsoft_ads_campaign_daily_report_identifier', 'campaign_performance_daily_report') }}"
    description: Each record in this table represents the daily performance by account, campaign and all non-metric columns.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date_day
            - account_id
            - campaign_id
            - device_os
            - device_type
            - network
            - currency_code
            - ad_distribution
            - bid_match_type
            - delivered_match_type
            - top_vs_other
            - budget_association_status
    columns:
      - name: date_day
        description: '{{ doc("date_day") }}' 
      - name: account_id
        description: '{{ doc("account_id") }}'
      - name: campaign_id
        description: '{{ doc("campaign_id") }}'
        tests:
          - not_null
      - name: currency_code
        description: '{{ doc("currency_code") }}'
      - name: device_os
        description: '{{ doc("device_os") }}'
      - name: device_type
        description: '{{ doc("device_type") }}'
      - name: network
        description: '{{ doc("network") }}'
      - name: ad_distribution
        description: '{{ doc("ad_distribution") }}'
      - name: bid_match_type
        description: '{{ doc("bid_match_type") }}'
      - name: delivered_match_type
        description: '{{ doc("delivered_match_type") }}'
      - name: top_vs_other
        description: '{{ doc("top_vs_other") }}'
      - name: budget_association_status
        description: '{{ doc("budget_association_status") }}'
      - name: clicks
        description: '{{ doc("clicks") }}'
      - name: impressions
        description: '{{ doc("impressions") }}'
      - name: spend
        description: '{{ doc("spend") }}'

  - name: stg_microsoft_ads__keyword_history
    identifier: "{{ var('microsoft_ads_keyword_history_identifier', 'keyword_history') }}"
    description: Each record in this table represents a version of one or more Microsoft keywords.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - keyword_id
            - modified_at
    columns:
      - name: keyword_id
        description: '{{ doc("keyword_id") }}'
        tests:
          - not_null
      - name: keyword_name
        description: '{{ doc("keyword_name") }}'
      - name: modified_at
        description: '{{ doc("modified_at") }}'
      - name: ad_group_id
        description: '{{ doc("ad_group_id") }}'
      - name: match_type
        description: '{{ doc("match_type") }}'
      - name: status
        description: '{{ doc("keyword_status") }}'
      - name: is_most_recent_record
        description: '{{ doc("is_most_recent_record") }}'

  - name: stg_microsoft_ads__keyword_daily_report
    identifier: "{{ var('microsoft_ads_keyword_daily_report_identifier', 'keyword_performance_daily_report') }}"
    description: Each record in this table represents the daily performance by account, campaign, ad group, ad, keyword and all non-metric columns.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date_day
            - account_id
            - campaign_id
            - ad_group_id
            - ad_id
            - keyword_id
            - device_os
            - device_type
            - network
            - language
            - currency_code
            - ad_distribution
            - bid_match_type
            - delivered_match_type
            - top_vs_other
    columns:
      - name: date_day
        description: '{{ doc("date_day") }}' 
      - name: account_id
        description: '{{ doc("account_id") }}'
      - name: campaign_id
        description: '{{ doc("campaign_id") }}'
      - name: ad_group_id
        description: '{{ doc("ad_group_id") }}'
      - name: ad_id
        description: '{{ doc("ad_id") }}'
      - name: keyword_id
        description: '{{ doc("keyword_id") }}'
        tests:
          - not_null
      - name: currency_code
        description: '{{ doc("currency_code") }}'
      - name: device_os
        description: '{{ doc("device_os") }}'
      - name: device_type
        description: '{{ doc("device_type") }}'
      - name: network
        description: '{{ doc("network") }}'
      - name: language
        description: '{{ doc("language") }}'
      - name: ad_distribution
        description: '{{ doc("ad_distribution") }}'
      - name: bid_match_type
        description: '{{ doc("bid_match_type") }}'
      - name: delivered_match_type
        description: '{{ doc("delivered_match_type") }}'
      - name: top_vs_other
        description: '{{ doc("top_vs_other") }}'
      - name: clicks
        description: '{{ doc("clicks") }}'
      - name: impressions
        description: '{{ doc("impressions") }}'
      - name: spend
        description: '{{ doc("spend") }}'

  - name: stg_microsoft_ads__search_daily_report
    identifier: "{{ var('microsoft_ads_search_query_daily_report_identifier', 'search_query_performance_daily_report') }}"
    description: Each record in this table represents the daily performance by account, campaign, ad group, ad, keyword and all non-metric columns.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date_day
            - account_id
            - campaign_id
            - ad_group_id
            - ad_id
            - keyword_id
            - search_query
            - device_os
            - device_type
            - network
            - language
            - bid_match_type
            - delivered_match_type
            - top_vs_other
    columns:
      - name: date_day
        description: '{{ doc("date_day") }}' 
      - name: account_id
        description: '{{ doc("account_id") }}'
      - name: campaign_id
        description: '{{ doc("campaign_id") }}'
      - name: ad_group_id
        description: '{{ doc("ad_group_id") }}'
      - name: ad_id
        description: '{{ doc("ad_id") }}'
      - name: keyword_id
        description: '{{ doc("keyword_id") }}'
      - name: search_query
        description: '{{ doc("top_vs_other") }}'
        tests:
          - not_null
      - name: device_os
        description: '{{ doc("device_os") }}'
      - name: device_type
        description: '{{ doc("device_type") }}'
      - name: network
        description: '{{ doc("network") }}'
      - name: language
        description: '{{ doc("language") }}'
      - name: ad_distribution
        description: '{{ doc("ad_distribution") }}'
      - name: bid_match_type
        description: '{{ doc("bid_match_type") }}'
      - name: delivered_match_type
        description: '{{ doc("delivered_match_type") }}'
      - name: top_vs_other
        description: '{{ doc("top_vs_other") }}'
      - name: clicks
        description: '{{ doc("clicks") }}'
      - name: impressions
        description: '{{ doc("impressions") }}'
      - name: spend
        description: '{{ doc("spend") }}'